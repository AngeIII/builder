image: wpbakery/ci-wordpress

stages:
  - codestyle
  - tests

testJavascriptCS:
  image: wpbakery/standardjs
  stage: codestyle
  script:
    - standard
  tags:
    - docker

testPluginpCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml plugin-wordpress.php
  tags:
    - docker

testBootstrapCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml bootstrap
  tags:
    - docker

testFrameworkCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml visualcomposer/Framework
  tags:
    - docker

testHelpersCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml visualcomposer/Helpers
  tags:
    - docker

testModulesCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml visualcomposer/Modules
  tags:
    - docker

testApplicationCS:
  stage: codestyle
  script:
    - composer install
    - phpcs --standard=ci/ruleset.xml visualcomposer/Application.php visualcomposer/Requirements.php
  tags:
    - docker

testFramework:
  stage: tests
  script:
    - composer install
    - phpunit --configuration=ci/phpunit-framework-coverage.xml
    - php ci/coverage-test.php
  tags:
    - docker

testHelpers:
  stage: tests
  script:
    - composer install
    - phpunit --configuration=ci/phpunit-helpers-coverage.xml
    - php ci/coverage-test.php
  tags:
    - docker

testModules:
  stage: tests
  script:
    - composer install
    - phpunit --configuration=ci/phpunit-modules-coverage.xml
    - php ci/coverage-test.php
  tags:
    - docker

